(function(n,t){"use strict";if(typeof define=="function"&&define.amd)define(["angular"],function(n){return t(n)});else return t(n)})(angular||null,function(n){"use strict";
/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
var t=n.module("ngTable",[]);
/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
t.value("ngTableDefaults",{params:{},settings:{}});t.factory("NgTableParams",["$q","$log","ngTableDefaults",function(t,i,r){var u=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};return function(f,e){var c=this,h=function(){o.debugMode&&i.debug&&i.debug.apply(this,arguments)},s,o;return this.data=[],this.parameters=function(t,i){var r,e,l,f,o,v,a,c;if(i=i||!1,n.isDefined(t)){for(r in t)if(e=t[r],i&&r.indexOf("[")>=0){for(l=r.split(/\[(.*)\]/).reverse(),f="",o=0,v=l.length;o<v;o++)a=l[o],a!==""&&(c=e,e={},e[f=a]=u(c)?parseFloat(c):c);f==="sorting"&&(s[f]={});s[f]=n.extend(s[f]||{},e[f])}else s[r]=u(t[r])?parseFloat(t[r]):t[r];return h("ngTable: set parameters",s),this}return s},this.settings=function(t){return n.isDefined(t)?(n.isArray(t.data)&&(t.total=t.data.length),o=n.extend(o,t),h("ngTable: set settings",o),this):o},this.page=function(t){return n.isDefined(t)?this.parameters({page:t}):s.page},this.total=function(t){return n.isDefined(t)?this.settings({total:t}):o.total},this.count=function(t){return n.isDefined(t)?this.parameters({count:t,page:1}):s.count},this.filter=function(t){return n.isDefined(t)?this.parameters({filter:t,page:1}):s.filter},this.sorting=function(t){if(arguments.length==2){var i={};return i[t]=arguments[1],this.parameters({sorting:i}),this}return n.isDefined(t)?this.parameters({sorting:t}):s.sorting},this.isSortBy=function(t,i){return n.isDefined(s.sorting[t])&&n.equals(s.sorting[t],i)},this.orderBy=function(){var n=[];for(var t in s.sorting)n.push((s.sorting[t]==="asc"?"+":"-")+t);return n},this.getData=function(t,i){return n.isArray(this.data)&&n.isObject(i)?t.resolve(this.data.slice((i.page()-1)*i.count(),i.page()*i.count())):t.resolve([]),t.promise},this.getGroups=function(i,r){var u=t.defer();return u.promise.then(function(t){var u={},f,e;n.forEach(t,function(t){var i=n.isFunction(r)?r(t):t[r];u[i]=u[i]||{data:[]};u[i].value=i;u[i].data.push(t)});f=[];for(e in u)f.push(u[e]);h("ngTable: refresh groups",f);i.resolve(f)}),this.getData(u,c)},this.generatePagesArray=function(n,t,i){var h,o,s,e,u,f,r;if(h=11,f=[],u=Math.ceil(t/i),u>1){for(f.push({type:"prev",number:Math.max(1,n-1),active:n>1}),f.push({type:"first",number:1,active:n>1,current:n===1}),s=Math.round((h-5)/2),e=Math.max(2,n-s),o=Math.min(u-1,n+s*2-(n-e)),e=Math.max(2,e-(s*2-(o-e))),r=e;r<=o;)r===e&&r!==2||r===o&&r!==u-1?f.push({type:"more",active:!1}):f.push({type:"page",number:r,active:n!==r,current:n===r}),r++;f.push({type:"last",number:u,active:n!==u,current:n===u});f.push({type:"next",number:Math.min(u,n+1),active:n<u})}return f},this.url=function(t){var r,f,i,e,u,o;t=t||!1;r=t?[]:{};for(f in s)if(s.hasOwnProperty(f))if(i=s[f],e=encodeURIComponent(f),typeof i=="object")for(u in i)n.isUndefined(i[u])||i[u]===""||(o=e+"["+encodeURIComponent(u)+"]",t?r.push(o+"="+i[u]):r[o]=i[u]);else n.isFunction(i)||n.isUndefined(i)||i===""||(t?r.push(e+"="+encodeURIComponent(i)):r[e]=encodeURIComponent(i));return r},this.reload=function(){var r=t.defer(),n=this,i=null;if(o.$scope)return o.$loading=!0,i=o.groupBy?o.getGroups(r,o.groupBy,this):o.getData(r,this),h("ngTable: reload data"),i||(i=r.promise),i.then(function(t){return o.$loading=!1,h("ngTable: current scope",o.$scope),o.groupBy?(n.data=t,o.$scope&&(o.$scope.$groups=t)):(n.data=t,o.$scope&&(o.$scope.$data=t)),o.$scope&&(o.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())),o.$scope.$emit("ngTableAfterReloadData"),t})},this.reloadPages=function(){var n=this;o.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())},s=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},n.extend(s,r.params),o={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData},n.extend(o,r.settings),this.settings(e),this.parameters(f,!0),this}}]);t.factory("ngTableParams",["NgTableParams",function(n){return n}]);
/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
t.controller("ngTableController",["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","ngTableColumn",function(t,i,r,u,f,e,o,s){function l(){t.params.$params.page=1}var h=!0,c;t.$filterRow={};t.$loading=!1;t.hasOwnProperty("params")||(t.params=new i,t.params.isNullInstance=!0);t.params.settings().$scope=t;c=function(){var n=0;return function(t,i){r.cancel(n);n=r(t,i)}}();t.$watch("params.$params",function(i,r){if(i!==r){if(t.params.settings().$scope=t,n.equals(i.filter,r.filter))t.params.reload();else{var u=h?n.noop:l;c(function(){u();t.params.reload()},t.params.settings().filterDelay)}t.params.isNullInstance||(h=!1)}},!0);this.compileDirectiveTemplates=function(){var i,r;o.hasClass("ng-table")||(t.templates={header:e.templateHeader?e.templateHeader:"ng-table/header.html",pagination:e.templatePagination?e.templatePagination:"ng-table/pager.html"},o.addClass("ng-table"),i=null,o.find("> thead").length===0&&(i=n.element(document.createElement("thead")).attr("ng-include","templates.header"),o.prepend(i)),r=n.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"}),o.after(r),i&&f(i)(t),f(r)(t))};this.loadFilterData=function(i){n.forEach(i,function(i){var r;if(r=i.filterData(t,{$column:i}),!r){delete i.filterData;return}return n.isObject(r)&&n.isObject(r.promise)?(delete i.filterData,r.promise.then(function(t){n.isArray(t)||n.isFunction(t)||n.isObject(t)?n.isArray(t)&&t.unshift({title:"-",id:""}):t=[];i.data=t})):i.data=r})};this.buildColumns=function(n){return n.map(function(n){return s.buildColumn(n,t)})};this.setupBindingsToInternalScope=function(i){var r=u(i);t.$watch(r,function(i){n.isUndefined(i)||(t.paramsModel=r,t.params=i)},!1);e.showFilter&&t.$parent.$watch(e.showFilter,function(n){t.show_filter=n});e.disableFilter&&t.$parent.$watch(e.disableFilter,function(n){t.$filterRow.disabled=n})};t.sortBy=function(n,i){var r=n.sortable&&n.sortable();if(r){var u=t.params.settings().defaultSort,e=u==="asc"?"desc":"asc",o=t.params.sorting()&&t.params.sorting()[r]&&t.params.sorting()[r]===u,f=i.ctrlKey||i.metaKey?t.params.sorting():{};f[r]=o?e:u;t.params.parameters({sorting:f})}}}]);t.factory("ngTableColumn",[function(){function i(i,r){var u=Object.create(i);for(var f in t)u[f]===undefined&&(u[f]=t[f]),n.isFunction(u[f])||function(n){u[n]=function(){return i[n]}}(f),function(n){var t=u[n];u[n]=function(){return arguments.length===0?t.call(i,r):t.apply(i,arguments)}}(f);return u}var t={"class":function(){return""},filter:function(){return!1},filterData:n.noop,headerTemplateURL:function(){return!1},headerTitle:function(){return""},sortIndicator:function(){return"div"},sortable:function(){return!1},show:function(){return!0},title:function(){return""},titleAlt:function(){return""}};return{buildColumn:i}}]);
/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
t.directive("ngTable",["$q","$parse",function(t,i){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(t){var r=[],f=0,u=null;if(n.forEach(n.element(t.find("tr")),function(t){t=n.element(t);t.hasClass("ng-table-group")||u||(u=t)}),u)return n.forEach(u.find("td"),function(t){var e=n.element(t);if(!e.attr("ignore-cell")||"true"!==e.attr("ignore-cell")){var o=function(n){return e.attr("x-data-"+n)||e.attr("data-"+n)||e.attr(n)},u=function(t){var u=o(t);return u?function(t,f){return i(u)(t,n.extend(f||{},{$columns:r}))}:undefined},s=o("title-alt")||o("title");s&&e.attr("data-title-text","{{"+s+"}}");r.push({id:f++,title:u("title"),titleAlt:u("title-alt"),headerTitle:u("header-title"),sortIndicator:u("sort-indicator"),sortable:u("sortable"),"class":u("header-class"),filter:u("filter"),headerTemplateURL:u("header"),filterData:u("filter-data"),show:e.attr("ng-show")?function(n){return i(e.attr("ng-show"))(n)}:undefined})}}),function(n,t,i,u){n.$columns=r=u.buildColumns(r);u.setupBindingsToInternalScope(i.ngTable);u.loadFilterData(r);u.compileDirectiveTemplates()}}}}]);t.directive("ngTableDynamic",["$parse",function(t){function i(n){if(!n||n.indexOf(" with ")>-1){var t=n.split(/\s+with\s+/);return{tableParams:t[0],columns:t[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')");}return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(r){var u;if(n.forEach(n.element(r.find("tr")),function(t){t=n.element(t);t.hasClass("ng-table-group")||u||(u=t)}),u)return n.forEach(u.find("td"),function(t){var i=n.element(t),u=function(n){return i.attr("x-data-"+n)||i.attr("data-"+n)||i.attr(n)},f=u("title"),r;f||i.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}");r=i.attr("ng-show");r||i.attr("ng-show","$columns[$index].show(this)")}),function(n,r,u,f){var e=i(u.ngTableDynamic),o=t(e.columns)(n)||[];n.$columns=f.buildColumns(o);f.setupBindingsToInternalScope(e.tableParams);f.loadFilterData(n.$columns);f.compileDirectiveTemplates()}}}}]);
/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
return t.directive("ngTablePagination",["$compile",function(t){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(i,r){i.params.settings().$scope.$on("ngTableAfterReloadData",function(){i.pages=i.params.generatePagesArray(i.params.page(),i.params.total(),i.params.count())},!0);i.$watch("templateUrl",function(u){if(!n.isUndefined(u)){var f=n.element(document.createElement("div"));f.attr({"ng-include":"templateUrl"});r.append(f);t(f)(i)}})}}}]),n.module("ngTable").run(["$templateCache",function(n){n.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{name}}"> <\/select>');n.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{name}}"> <\/select>');n.put("ng-table/filters/text.html",'<input type="text" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>');n.put("ng-table/header.html",'<tr> <th title="{{$column.headerTitle(this)}}" ng-repeat="$column in $columns" ng-class="{ \'sortable\': $column.sortable(this), \'sort-asc\': params.sorting()[$column.sortable(this)]==\'asc\', \'sort-desc\': params.sorting()[$column.sortable(this)]==\'desc\' }" ng-click="sortBy($column, $event)" ng-show="$column.show(this)" ng-init="template=$column.headerTemplateURL(this)" class="header {{$column.class(this)}}"> <div ng-if="!template" ng-show="!template" class="ng-table-header" ng-class="{\'sort-indicator\': $column.sortIndicator(this)==\'div\'}"> <span ng-bind="$column.title(this)" ng-class="{\'sort-indicator\': $column.sortIndicator(this)==\'span\'}"><\/span> <\/div> <div ng-if="template" ng-show="template" ng-include="template"><\/div> <\/th> <\/tr> <tr ng-show="show_filter" class="ng-table-filters"> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-show="$column.show(this)" class="filter"> <div ng-repeat="(name, filter) in $column.filter(this)"> <div ng-if="filter.indexOf(\'/\') !==-1" ng-include="filter"><\/div> <div ng-if="filter.indexOf(\'/\')===-1" ng-include="\'ng-table/filters/\' + filter + \'.html\'"><\/div> <\/div> <\/th> <\/tr> ');n.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager" ng-if="params.data.length"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"><\/span> <\/button> <\/div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;<\/a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;<\/a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;<\/a> <\/li> <\/ul> <\/div> ')}]),t});
//# sourceMappingURL=ng-table.min.js.map
